microshare:
  username: ${MICROSHARE_USERNAME}
  password: ${MICROSHARE_PASSWORD}
  api_key: ${MICROSHARE_API_KEY}
  view_id: "63f49ba62c0e2e2b0ede4992"
  rec_type: "io.microshare.lake.snapshot.hourly"
  data_context: '["CUSTOMER","occupancytesting","room"]'
  category: "space"
  metric: "occupancy"
  owner_org: '"[a-zA-Z]"'
  location: "Prony"
  base_url: "https://api.microshare.io"
  token_url: "https://auth.microshare.io/oauth2/token"

event_hub:
  connection_string: ${EVENT_HUB_CONNECTION_STRING}
  namespace: ${EVENT_HUB_NAMESPACE}
  event_hub_name: ${EVENT_HUB_NAME}
  batch_size: 100
  send_timeout_seconds: 30
  max_retries: 3

database:
  host: ${DB_HOST}
  port: ${DB_PORT}
  name: ${DB_NAME}
  user: ${DB_USER}
  password: ${DB_PASSWORD}
  pool_size: 10
  max_overflow: 20
  pool_pre_ping: true
  echo: false

service:
  poll_interval_minutes: 15
  lookback_window_hours: 2
  retention_days: 60
  retry_interval_minutes: 5
  max_retry_attempts: 10
  advisory_lock_id: 987654321
  cleanup_hour: 2  # 2 AM

alerting:
  smtp_host: ${SMTP_HOST}
  smtp_port: ${SMTP_PORT}
  smtp_user: ${SMTP_USER}
  smtp_password: ${SMTP_PASSWORD}
  smtp_use_tls: true
  from_email: ${ALERT_FROM_EMAIL}
  to_emails:
    - ${ALERT_TO_EMAILS}
  alert_throttle_minutes: 60
  conditions:
    microshare_api_failures: 5
    microshare_api_down_minutes: 30
    eventhub_failures: 10
    eventhub_down_minutes: 30
    retry_queue_depth: 100
    dead_letter_depth: 10
    no_data_hours: 2

health_check:
  enabled: true
  host: "0.0.0.0"
  port: 8080

logging:
  level: ${LOG_LEVEL}
  format: "json"
  file: "/var/log/customer-occupancy/service.log"
  max_bytes: 104857600  # 100MB
  backup_count: 10
  console_output: true
