# Microshare to Event Hub Forwarder Configuration
# Example configuration showing different recType options

# ============================================================================
# CONFIGURATION PROFILES
# Uncomment the profile that matches your data source
# ============================================================================

# PROFILE 1: Hourly Snapshot Data (default)
# Use this for aggregated hourly occupancy snapshots
microshare:
  username: ${MICROSHARE_USERNAME}
  password: ${MICROSHARE_PASSWORD}
  api_key: ${MICROSHARE_API_KEY}
  
  # View-based aggregation settings
  view_id: "YOUR_VIEW_ID_HERE"  # Get from Microshare support
  rec_type: "io.microshare.lake.snapshot.hourly"
  data_context: '["${MICROSHARE_DATA_CONTEXT}","occupancy","room"]'
  
  # Query parameters
  category: "space"
  metric: "occupancy"
  owner_org: '"[a-zA-Z]"'
  location: "Building-A"  # Optional: filter by location

# PROFILE 2: People Counter Aggregated Events
# Use this for 15-minute aggregated people counting data
# microshare:
#   username: ${MICROSHARE_USERNAME}
#   password: ${MICROSHARE_PASSWORD}
#   api_key: ${MICROSHARE_API_KEY}
#   
#   view_id: "YOUR_VIEW_ID_HERE"
#   rec_type: "io.microshare.peoplecounter.unpacked.event.agg"
#   data_context: '["people"]'
#   
#   # Optional filters
#   location: "Main-Campus"

# PROFILE 3: Occupancy Motion Sensors
# Use this for real-time occupancy sensor data
# microshare:
#   username: ${MICROSHARE_USERNAME}
#   password: ${MICROSHARE_PASSWORD}
#   api_key: ${MICROSHARE_API_KEY}
#   
#   view_id: "YOUR_VIEW_ID_HERE"
#   rec_type: "io.microshare.occupancy.unpacked"
#   data_context: '["room","motion"]'
#   
#   # Optional filters
#   location: "Office-Building-1"

# ============================================================================
# EVENT HUB CONFIGURATION
# ============================================================================
event_hub:
  connection_string: ${EVENT_HUB_CONNECTION_STRING}
  batch_size: 100
  send_timeout_seconds: 30
  max_retries: 3

# ============================================================================
# SERVICE SETTINGS
# ============================================================================
service:
  poll_interval_minutes: 60  # How often to fetch data
  lookback_window_hours: 1    # Fetch data from last N hours

# State management (Azure Table Storage)
state_file: "/var/lib/microshare-forwarder/state.json"  # Not used in Azure Functions

# Logging
logging:
  level: ${LOG_LEVEL}
  console_output: true
